<?php/** * Elementor Posts Widget * * @package Woostify Pro */namespace Elementor;/** * Class Finazi_Blog_Widget elementor posts widget. */class Finazi_Blog_Widget extends \Elementor\Widget_Base {    /**     * Name     */    public function get_name() {        return 'finazi-blog';    }    /**     * Title     */    public function get_title() {        return esc_html__( 'Blog', 'finazi-pro' );    }    /**     * Icon     */    public function get_icon() {        return 'eicon-post';    }    /**     * Controls     */    protected function _register_controls() {        $this->start_controls_section(            'post_content',            array(                'label' => esc_html__( 'General', 'finazi-pro' ),            )        );        // Posts per page.        $this->add_control(            'posts_per_page',            array(                'label'   => esc_html__( 'Posts Per Page', 'finazi-pro' ),                'type'    => Controls_Manager::NUMBER,                'min'     => -1,                'max'     => 100,                'step'    => 1,                'default' => 3,            )        );        // Orderby.        $this->add_control(            'order_by',            array(                'label'     => esc_html__( 'Order By', 'finazi-pro' ),                'type'      => Controls_Manager::SELECT,                'default'   => 'id',                'options'   => array(                    'id'            => esc_html__( 'ID', 'finazi-pro' ),                    'author'        => esc_html__( 'Author', 'finazi-pro' ),                    'title'         => esc_html__( 'Title', 'finazi-pro' ),                    'name'          => esc_html__( 'Name', 'finazi-pro' ),                    'date'          => esc_html__( 'Date', 'finazi-pro' ),                    'rand'          => esc_html__( 'Random', 'finazi-pro' ),                    'modified'      => esc_html__( 'Modified', 'finazi-pro' ),                    'comment_count' => esc_html__( 'Comment Count', 'finazi-pro' ),                ),            )        );        // Order.        $this->add_control(            'order',            array(                'label'     => esc_html__( 'Order', 'finazi-pro' ),                'type'      => Controls_Manager::SELECT,                'default'   => 'ASC',                'options'   => array(                    'ASC'   => esc_html__( 'ASC', 'finazi-pro' ),                    'DESC'  => esc_html__( 'DESC', 'finazi-pro' ),                ),            )        );        $this->end_controls_section();    }    /**     * Render     */    protected function render() {        $settings = $this->get_settings_for_display();        $args = array(            'post_type' => 'post',            'order'     => $settings['order'],            'order_by'  => $settings['order_by'],            'posts_per_page' => $settings['posts_per_page'],        );        $query = new \WP_Query( $args );        if ( $query->have_posts() ) {            while ( $query->have_posts() ) {                $query->the_post();                $img = get_the_post_thumbnail_url( get_the_ID(), 'full' );                ?>                <div class="row">                    <div class="our-blog col-md-4">                        <?php if ( has_post_thumbnail() ) { ?>                        <a class="blog-post-img" href="<?php the_permalink(); ?>">                            <img src="<?php echo esc_url( $img ); ?>" alt="<?php esc_attr_e( 'Thumbnail image', 'finazi' ); ?>">                            <div class="blog-info">                                <div class="blog-date"><span class="ion-calendar"></span><?php echo get_the_date(); ?></div>                                <div class="blog-author"><span class="fa fa-pencil-square-o"></span><a href="<?php echo get_author_posts_url( get_the_author_meta( 'ID' ) , get_the_author_meta( 'user_nicename' ) ); ?>">                                    <?php echo get_the_author_link(); ?>                                 </a>                                 </div>                            </div>                        </a>                        <?php }  ?>                                                <h2 class="blog-title">                            <a href="<?php the_permalink(); ?>"><?php echo get_the_title(); ?></a>                        </h2>                    </div>                </div>                <?php            }            // reset post.            wp_reset_postdata();        }    }}Plugin::instance()->widgets_manager->register_widget_type( new Finazi_Blog_Widget() );